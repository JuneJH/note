# Nginx配置

> 高并发: 单核处理器,同时存在多个进程处于就绪态只有一个处于运行态,`Nginx`利用多进程,多线程,异步处理并发
>
> 低消耗: 
>
> 热部署: 平滑重启
>
> 高可用: 一个主进程,多个worker进程
>
> 高扩展: C语言扩展，LUA脚本扩展  

## 1. 反向代理

> 针对服务器

- 分布式路由
- 负载均衡
- 动态分离
- 缓存

## 2. 正向代理

> 针对客户端

- 隐藏服务端 
- 提速和科学上网
- 缓存管理
- 授权 (防火墙)

## 3. 零拷贝

- 传统零拷贝
- DMA
- MMAP

## 4. 多路复用

1. select
   - 轮询
   - 数组队列
   - 复制

2. poll
   - 轮询
   - 链表队列
   - 复制

3. epoll
   - 回调
   - 链表队列
   - mmap零拷贝

## 5. 常用命令

> `nginx`

1. 参数
   - `-V`: 详细版本
   - `-v`: 版本
   - `-t`: 测试配置文件
   - `-T`: 测试详细
   - `-q`: 显示错误信息,可搭配`-t`
   - `-s`: 向主进程发生消息`reload`(热部署),`stop`,`quit`,`reopen``
   - `-p`: 设置配置路径
   - `-c`: 设置配置文件名字
   - `-g`: 设置一个全局命令

## 6. 配置

### 1. 全局模块

> 配置进程相关

1. 配置多个`worker`进程

   ```shell
   worker-processes:2; // 一般设置为cpu内核数量或者内核数量的整数倍,可以取auto
   ```

   

### 2. Event模块

> 配置线程相关

### 3. Http模块

> 配置处理Http请求

1. 全局配置
2. `Server`下配置虚拟主机

### 4. HTTPS 模块











